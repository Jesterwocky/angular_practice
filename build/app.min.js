"use strict";var myApp=angular.module("myModule",[]);myApp.controller("employeesController",function($scope,pageService){var employees=[{firstName:"Joe",lastName:"Golightly",gender:"Male",skills:[{skill:"writing"},{skill:"trapeze"},{skill:"RUNRUNRUNAWAAAAY"}]},{firstName:"Jane",lastName:"Bread",gender:"Female",skills:[{skill:"basket-weaving"},{skill:"wrestling"},{skill:"singing"}]},{firstName:"Alexia",lastName:"Gould",gender:"Female",skills:[{skill:"Hammering"},{skill:"Knitting"}]},{firstName:"Winston",lastName:"Karlsbad",gender:"Male",skills:[{skill:"Queueing"},{skill:"Blinking"},{skill:"Empathy"}]},{firstName:"Anne",lastName:"Gregor"},{firstName:"Brandon",lastName:"Noise"},{firstName:"Rita",lastName:"Yuli"},{firstName:"Evan",lastName:"Moss"},{firstName:"Helene",lastName:"Robespierre"},{firstName:"Mark",lastName:"Hilton"},{firstName:"Gemma",lastName:"Nearfar"},{firstName:"Joe",lastName:"Balliard"},{firstName:"Lora",lastName:"Valentino"},{firstName:"Hastings",lastName:"Clark"},{firstName:"Pauline",lastName:"Noelle"},{firstName:"Grover",lastName:"Daring"},{firstName:"Melanie",lastName:"Ferris"},{firstName:"Uther",lastName:"Pendragon"},{firstName:"Eliana",lastName:"Zomg"},{firstName:"Philadelphia",lastName:"Jones"},{firstName:"Yvonne",lastName:"Dorn"}],currentPage=1,elementsPerPage=2,pages=pageService.allPages(employees,elementsPerPage);$scope.pageOfEmployees=pages[currentPage-1],$scope.buttonList=pageService.centerPageRange(pages.length,currentPage),$scope.changePage=function(pageNumber,index){"..."===pageNumber?0===index?$scope.buttonList=pageService.leftScrollRange(pages.length,$scope.buttonList):$scope.buttonList=pageService.rightScrollRange(pages.length,$scope.buttonList):(currentPage=pageNumber,$scope.pageOfEmployees=pages[currentPage-1],$scope.buttonList=pageService.centerPageRange(pages.length,currentPage))}});var DEFAULTBUTTONS=8;myApp.factory("pageService",function(){var range=function(start,stop){for(var numbersInRange=[],i=start;i<stop;i++)numbersInRange.push(i);return numbersInRange},addElipsisButtons=function(pageRange,totalPages,maxButtons){return maxButtons=maxButtons||DEFAULTBUTTONS,pageRange[0]>1&&(pageRange[0]="..."),pageRange[pageRange.length-1]<totalPages&&pageRange.length===maxButtons&&(pageRange[pageRange.length-1]="..."),pageRange};return{pageRange:function(totalPages){return range(1,totalPages+1)},elementsOnPage:function(elements,elementsPerPage,centeredPage){return elements.slice(elementsPerPage*centeredPage-elementsPerPage,elementsPerPage*centeredPage)},allPages:function(elements,elementsPerPage){for(var totalPages=Math.ceil(elements.length/elementsPerPage),pages=[],i=0;i<totalPages;i++)pages.push(this.elementsOnPage(elements,elementsPerPage,i+1));return pages},centerPageRange:function(numPages,centeredPage,maxButtons){maxButtons=maxButtons||DEFAULTBUTTONS;var centerButton=Math.floor(maxButtons/2)+1,firstPage=Math.max(0,centeredPage-centerButton),lastPage=firstPage+maxButtons;lastPage>numPages&&(firstPage=Math.max(0,firstPage-(lastPage-numPages)));var centeredRange=this.pageRange(numPages).slice(firstPage,lastPage);return addElipsisButtons(centeredRange,numPages)},scrollRange:function scrollRange(numPages,currentView,scrollAmount,maxButtons){maxButtons=maxButtons||DEFAULTBUTTONS;var buttonsLength=currentView.length,fullPageRange=this.pageRange(numPages),firstPage=Math.max(1,currentView[1]+scrollAmount-1),lastPage=firstPage+(buttonsLength-1);lastPage>numPages&&(firstPage-=lastPage-numPages);var scrollRange=fullPageRange.slice(firstPage-1,firstPage-1+buttonsLength);return addElipsisButtons(scrollRange,numPages)},rightScrollRange:function(numPages,currentView,scrollAmount){return this.scrollRange(numPages,currentView,scrollAmount||1)},leftScrollRange:function(numPages,currentView,scrollAmount){return this.scrollRange(numPages,currentView,scrollAmount||-1)}}});